{"ast":null,"code":"import _slicedToArray from\"C:/Users/nirg/Desktop/spring/cuoponProject/cuoponProject/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useCallback}from'react';import'../Design/App.css';import{HomeCustomer}from'./Customer/HomeCustomer';import{HomeCompany}from'./Company/HomeCompany';import HomeAdmin from'./Admin/HomeAdmin';import{CustomerProvider,UseCustomerContext}from'../contexts/AppContextCustomer';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),loginToken=_useState2[0],setLoginToken=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),userType=_useState8[0],setUserType=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),id1=_useState10[0],setId=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),array=_useState12[0],setArray=_useState12[1];var login=useCallback(function(event){event.preventDefault();// prevent page refresh\nfetch('http://localhost:8080/login',{headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,password:password,userType:userType}),mode:'cors',method:'POST'}).then(function(data){return data.text();}).then(function(token){return setLoginToken(token);}).catch(function(error){return console.log(error);});},[email,password,userType]);var userHendler=function userHendler(){if(loginToken!==''&&userType=='ADMINISTRATOR'){return/*#__PURE__*/_jsx(HomeAdmin,{token:loginToken});}if(loginToken!==''&&userType=='CUSTOMER'){var _array$;var customers=UseCustomerContext();var filteredCustomers=customers.filter(function(customer){return customer.email===email;});var customerArray=filteredCustomers.length?[filteredCustomers[0]]:[];setArray(customerArray);setId((_array$=array[0])===null||_array$===void 0?void 0:_array$.id);return/*#__PURE__*/_jsx(CustomerProvider,{token:loginToken,children:/*#__PURE__*/_jsx(HomeCustomer,{token:loginToken,id:id1})});}if(loginToken!==''&&userType=='COMPANY'){/*#__PURE__*/_jsx(HomeCompany,{token:loginToken});}};console.log(loginToken);return/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:loginToken===''?/*#__PURE__*/_jsxs(\"form\",{onSubmit:login,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:function onChange(event){return setEmail(event.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Password: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:function onChange(event){return setPassword(event.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"User Type: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"userType\",value:userType,onChange:function onChange(event){return setUserType(event.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"})]}):userHendler()});}export default Login;","map":{"version":3,"names":["useState","useCallback","HomeCustomer","HomeCompany","HomeAdmin","CustomerProvider","UseCustomerContext","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","loginToken","setLoginToken","_useState3","_useState4","email","setEmail","_useState5","_useState6","password","setPassword","_useState7","_useState8","userType","setUserType","_useState9","_useState10","id1","setId","_useState11","_useState12","array","setArray","login","event","preventDefault","fetch","headers","body","JSON","stringify","mode","method","then","data","text","token","catch","error","console","log","userHendler","_array$","customers","filteredCustomers","filter","customer","customerArray","length","id","children","className","onSubmit","type","value","onChange","target"],"sources":["C:/Users/nirg/Desktop/spring/cuoponProject/cuoponProject/client/src/Components/Login.tsx"],"sourcesContent":["import { useState, useCallback, FormEvent } from 'react';\nimport '../Design/App.css'\nimport { HomeCustomer } from './Customer/HomeCustomer';\nimport { HomeCompany } from './Company/HomeCompany';\nimport HomeAdmin from './Admin/HomeAdmin';\nimport { CustomerProvider, UseCustomerContext} from '../contexts/AppContextCustomer';\nimport { Company, Customer } from '../Entitis.type';\n\nfunction Login(): JSX.Element {\n  const [loginToken, setLoginToken] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [userType, setUserType] = useState('');\n  const[id1,setId]=useState<number|undefined>();\n  const[array,setArray]=useState<Array<Customer|Company>>([]);\n\n\n  const login = useCallback((event: FormEvent<HTMLFormElement>): void => {\n    event.preventDefault(); // prevent page refresh\n\n    fetch('http://localhost:8080/login', {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        email: email,\n        password: password,\n        userType: userType,\n      }),\n      mode: 'cors',\n      method: 'POST',\n    })\n      .then((data) => data.text())\n      .then((token) => setLoginToken(token))\n      .catch((error) => console.log(error));\n  }, [email, password, userType]);\n\n  const userHendler = () => {\n    if (loginToken !== '' && userType == 'ADMINISTRATOR') {\n      return (\n          <HomeAdmin token={loginToken}/>\n      )\n    }\n\n    if (loginToken !== '' && userType == 'CUSTOMER') {\n      const customers = UseCustomerContext();\n      const filteredCustomers = customers.filter((customer) => customer.email === email);\n      const customerArray = filteredCustomers.length ? [filteredCustomers[0]] : [];\n      setArray(customerArray);\n      setId(array[0]?.id);\n\n      return(<CustomerProvider token={loginToken}><HomeCustomer token={loginToken} id={id1}/></CustomerProvider>)\n    }\n    if (loginToken !== '' && userType == 'COMPANY') {\n      <HomeCompany token={loginToken} />\n    }\n  }\n  console.log(loginToken);\n\n  return (\n  \n      <div className=\"login\">\n\n        {loginToken === '' ? <form onSubmit={login}>{/*move login to different component*/}\n          <label>Email: </label>\n          <input type=\"email\" value={email} onChange={(event) => setEmail(event.target.value)} /><br />\n          <label>Password: </label>\n          <input type=\"password\" value={password} onChange={(event) => setPassword(event.target.value)} /><br />\n          <label>User Type: </label>\n          <input type=\"userType\" value={userType} onChange={(event) => setUserType(event.target.value)} /><br />\n          <button type=\"submit\">Login</button>\n        </form>\n          :\n          \n          userHendler()\n          \n        }\n\n      </div>\n  \n    \n  );\n}\n\nexport default Login;\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}